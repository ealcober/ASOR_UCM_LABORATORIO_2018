Ejercicio 1 [VM1]. Determinar los interfaces de red que tiene la máquina y las direcciones IP y/o
MAC que tienen asignadas. Utilizar el comando ​ ip​ .

ip l / ip link = muestra interfaces
ip a / ip address = muestra ifaces y config
ip m / ip maddress = muestra dir MAC

Ejercicio 2 [VM1,VM2, Router]. Activar los interfaces ​ eth0 en las máquinas VM1, VM2 y Router, y
asignar una dirección IP adecuada. La configuración debe realizarse con la utilidad ​ ip​ , en particular
los comandos ​ ip address​ e ​ ip link​ .

activar eth0:

ip link set eth0 up / ip l set eth0 up

asignar ip adecuada:

ip a add 192.168.1.129/25 dev eth0

Ejercicio 3 [VM1,VM2]. Arrancar la herramienta wireshark y activar la captura en el interfaz de red.
Comprobar la conectividad entre VM1 y VM2 con la orden ​ ping​ . Observar el tráfico generado,
especialmente los protocolos encapsulados en cada datagrama y las direcciones origen y destino.

hacer

Ejercicio 4 [VM1, VM2]. Ejecutar de nuevo la orden ping entre VM1 y VM2, y a continuación
comprobar el estado de la tabla ARP en VM1 y VM2 usando el comando ip neigh​ . El significado
del estado de cada entrada de la tabla se puede consultar en la página de manual del comando.

ip n / ip neigh = muestra tabla arp
ip n flush dev eth0 = borra tabla arp dispositivo


Ejercicio 5 [Router, VM4]. ​ Repetir la configuración de red para el segmento 192.168.0.0/24.
Comprobar la conectividad entre Router y VM4; y entre Router, VM1 y VM2.

ping pong

Encaminamiento estático
Según la topología de esta práctica la máquina Router puede encaminar el tráfico entre las redes
10.0.0.0/24 y 192.168.0.0/24. En esta sección vamos a configurar el encaminamiento estático,
basado en rutas que fijaremos manualmente en todas las máquinas virtuales.

Ejercicio 1 [Router]. Activar el reenvío de paquetes (​ forwarding ) ​ en Router para que efectivamente
pueda funcionar como encaminador entre las redes 10.0.0.0/24 y 192.168.0.0/24. Ejecutar el
comando:

Listado 1: ​ Activar el reenvío de paquetes
# sysctl net.ipv4.ip_forward=1

Ejercicio 2 [VM1,VM2]. ​ Añadir la máquina Router como router por defecto para VM1 y VM2. Usar el
comando​ ip route​ .
Ejercicio 3 [VM4]. Aunque la configuración adecuada para la tabla de rutas de hosts en redes como
las consideradas en esta práctica consiste en añadir una ruta por defecto; es posible incluir rutas
para redes concretas. Añadir a la tabla de rutas de VM4 una ruta a la red 10.0.0.0/24 via Router.

ip r / ip route = muestra tabla de rutas

All network packets that cannot be sent according to the previous entries of the routing table are sent through the following default gateway
# ip route add default via 192.168.1.254
Task: Delete route from table

Type the following command to sent all packets to the local network 192.168.1.0 directly through the device eth0:, enter:
# ip route add 192.168.1.0/24 dev eth0
Task: Set a default route

Type the following command
# ip route delete 192.168.1.0/24 dev eth0

Ejercicio 4 [VM1,VM4]. Usar la orden ping entre las máquinas VM1 y VM4. Con ayuda de la
herramienta wireshark completar la siguiente tabla para todos los paquetes intercambiados hasta
la recepción de la primera respuesta ECHO_REPLY.